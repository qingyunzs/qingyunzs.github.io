---
layout: post
title: Java 开发笔记
author: zrg
comments: false
description: Java 开发笔记
categories:
- java
tags:
- Java
photos:
---

<div id="outline-container-org03accb3" class="outline-2">
<h2 id="org03accb3"><span class="section-number-2">1</span> Java 基础</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org62e1f0b" class="outline-3">
<h3 id="org62e1f0b"><span class="section-number-3">1.1</span> Java 基本语法</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org3424245" class="outline-4">
<h4 id="org3424245"><span class="section-number-4">1.1.1</span> 自动装箱、拆箱</h4>
<div class="outline-text-4" id="text-1-1-1">
<ol class="org-ol">
<li><p>
什么是自动装箱、拆箱
<br />
简单一点说，装箱就是自动将基本数据类型转换为包装器类型；拆箱就是自动将包装器类型转换为基本数据类型。如下所示：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #8B8878;">//</span><span style="color: #8B8878;">&#33258;&#21160;&#35013;&#31665;</span>
<span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">total</span> = 99;

<span style="color: #8B8878;">//</span><span style="color: #8B8878;">&#33258;&#21160;&#25286;&#31665;</span>
<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">totalprim</span> = total;
</pre>
</div>

<p>
反编译class文件之后得到如下内容：
</p>

<pre class="example">
javap -c StringTest
</pre>


<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">total</span> = 99; 
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#25191;&#34892;&#19978;&#38754;&#37027;&#21477;&#20195;&#30721;&#30340;&#26102;&#20505;&#65292;&#31995;&#32479;&#20026;&#25105;&#20204;&#25191;&#34892;&#20102;&#65306; </span>
<span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">total</span> = Integer.valueOf(99);

<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">totalprim</span> = total; 
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#25191;&#34892;&#19978;&#38754;&#37027;&#21477;&#20195;&#30721;&#30340;&#26102;&#20505;&#65292;&#31995;&#32479;&#20026;&#25105;&#20204;&#25191;&#34892;&#20102;&#65306; </span>
<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">totalprim</span> = total.intValue();

<span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#36827;&#32780;&#20197;Integer&#20026;&#20363;&#65292;&#20998;&#26512;&#28304;&#30721;</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">Integer.valueOf&#20989;&#25968;</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">Integer</span> <span style="color: #87D700;">valueOf</span>(<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">i</span>) {
    <span style="color: #FF1493;">return</span>  i &gt;= 128 || i &lt; -128 ? <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Integer</span>(i) : SMALL_VALUES[i + 128];
}

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">Integer&#30340;&#26500;&#36896;&#20989;&#25968;&#65306;</span>
<span style="color: #FF1493;">private</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">value</span>;

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#23450;&#20041;&#20102;&#19968;&#20010;value&#21464;&#37327;&#65292;&#21019;&#24314;&#19968;&#20010;Integer&#23545;&#35937;&#65292;&#23601;&#20250;&#32473;&#36825;&#20010;&#21464;&#37327;&#21021;&#22987;&#21270;&#12290;</span>
<span style="color: #FF1493;">public</span> <span style="color: #87D700;">Integer</span>(<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">value</span>) {
    <span style="color: #FF1493;">this</span>.value = value;
}

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#20256;&#20837;&#30340;&#26159;&#19968;&#20010;String&#21464;&#37327;&#65292;&#23427;&#20250;&#20808;&#25226;&#23427;&#36716;&#25442;&#25104;&#19968;&#20010;int&#20540;&#65292;&#28982;&#21518;&#36827;&#34892;&#21021;&#22987;&#21270;&#12290;</span>
<span style="color: #FF1493;">public</span> <span style="color: #87D700;">Integer</span>(<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">string</span>) <span style="color: #FF1493;">throws</span> <span style="color: #5FD7FF;">NumberFormatException</span> {
    <span style="color: #FF1493;">this</span>(parseInt(string));
}

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">SMALL_VALUES[i + 128]&#65292;&#23427;&#26159;&#19968;&#20010;&#38745;&#24577;&#30340;Integer&#25968;&#32452;&#23545;&#35937;&#65292;&#20063;&#23601;&#26159;&#35828;&#26368;&#32456;valueOf&#36820;&#22238;&#30340;&#37117;&#26159;&#19968;&#20010;Integer&#23545;&#35937;&#12290;</span>
<span style="color: #FF1493;">private</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">Integer</span>[] <span style="color: #FF8C00;">SMALL_VALUES</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Integer</span>[256];
</pre>
</div>

<p>
小结：装箱的过程会创建对应的对象，这个会消耗内存，所以装箱的过程会增加内存的消耗，影响性能。
</p></li>
<li><p>
进一步了解
<br />
在Integer的构造函数中，它分两种情况：
</p>
<pre class="example">
i &gt;= 128 || i &lt; -128 =====&gt; new Integer(i)
i &lt; 128 &amp;&amp; i &gt;= -128 =====&gt; SMALL_VALUES[i + 128]
</pre>


<pre class="example">
private static final Integer[] SMALL_VALUES = new Integer[256];
</pre>


<p>
SMALL_VALUES本来已经被创建好，也就是说在i &gt;= 128 || i &lt; -128是会创建不同的对象，在i &lt; 128 &amp;&amp; i &gt;= -128会根据i的值返回已经创建好的指定的对象。下面举例说明：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Main</span> {
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">void</span> <span style="color: #87D700;">main</span>(<span style="color: #5FD7FF;">String</span>[] <span style="color: #FF8C00;">args</span>) {

        <span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">i1</span> = 100;
        <span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">i2</span> = 100;
        <span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">i3</span> = 200;
        <span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">i4</span> = 200;

        System.out.println(i1==i2);  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
        System.out.println(i3==i4);  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">false</span>
    }
}
</pre>
</div>

<ul class="org-ul">
<li>i1和i2会进行自动装箱，执行了valueOf函数，它们的值在(-128,128]这个范围内，它们会拿到SMALL_VALUES数组里面的同一个对象SMALL_VALUES[228]，它们引用到了同一个Integer对象，所以它们肯定是相等的。</li>
<li>i3和i4也会进行自动装箱，执行了valueOf函数，它们的值大于128，所以会执行new Integer(200)，也就是说它们会分别创建两个不同的对象，所以它们肯定不等。</li>
</ul>

<p>
<b>举例2:</b>
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Main</span> {
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">void</span> <span style="color: #87D700;">main</span>(<span style="color: #5FD7FF;">String</span>[] <span style="color: #FF8C00;">args</span>) {

        <span style="color: #5FD7FF;">Double</span> <span style="color: #FF8C00;">i1</span> = 100.0;
        <span style="color: #5FD7FF;">Double</span> <span style="color: #FF8C00;">i2</span> = 100.0;
        <span style="color: #5FD7FF;">Double</span> <span style="color: #FF8C00;">i3</span> = 200.0;
        <span style="color: #5FD7FF;">Double</span> <span style="color: #FF8C00;">i4</span> = 200.0;

        System.out.println(i1==i2); <span style="color: #8B8878;">//</span><span style="color: #8B8878;">false</span>
        System.out.println(i3==i4); <span style="color: #8B8878;">//</span><span style="color: #8B8878;">false</span>
    }
}
</pre>
</div>
<p>
看看上面的执行结果，跟Integer不一样，对于Integer，在(-128,128]之间只有固定的256个值，所以为了避免多次创建对象，我们事先就创建好一个大小为256的Integer数组SMALL_VALUES，所以如果值在这个范围内，就可以直接返回我们事先创建好的对象就可以了。
<br />
但是对于Double类型来说，因为它在这个范围内个数是无限的。所以在Double里面的做法很直接，就是直接创建一个对象，所以每次创建的对象都不一样。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">Double</span> <span style="color: #87D700;">valueOf</span>(<span style="color: #5FD7FF;">double</span> <span style="color: #FF8C00;">d</span>) {
     <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Double</span>(d);
}
</pre>
</div>

<p>
下面我们进行一个归类：
</p>
<ul class="org-ul">
<li>Integer派别：Integer、Short、Byte、Character、Long这几个类的valueOf方法的实现是类似的。</li>
<li>Double派别：Double、Float的valueOf方法的实现是类似的。每次都返回不同的对象。</li>
</ul></li>
<li>其他情况
<ul class="org-ul">
<li><p>
Boolean
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Main</span> {
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">void</span> <span style="color: #87D700;">main</span>(<span style="color: #5FD7FF;">String</span>[] <span style="color: #FF8C00;">args</span>) {

        <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">i1</span> = <span style="color: #AF87FF;">false</span>;
        <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">i2</span> = <span style="color: #AF87FF;">false</span>;
        <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">i3</span> = <span style="color: #AF87FF;">true</span>;
        <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">i4</span> = <span style="color: #AF87FF;">true</span>;

        System.out.println(i1==i2);<span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
        System.out.println(i3==i4);<span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
    }
}

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36820;&#22238;&#30340;&#37117;&#26159;true&#65292;&#20063;&#23601;&#26159;&#23427;&#20204;&#25191;&#34892;valueOf&#36820;&#22238;&#30340;&#37117;&#26159;&#30456;&#21516;&#30340;&#23545;&#35937;&#12290;</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">Boolean</span> <span style="color: #87D700;">valueOf</span>(<span style="color: #5FD7FF;">boolean</span> <span style="color: #FF8C00;">b</span>) {
    <span style="color: #FF1493;">return</span> b ? <span style="color: #AF87FF;">Boolean</span>.TRUE : <span style="color: #AF87FF;">Boolean</span>.FALSE;
}

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#21487;&#20197;&#30475;&#21040;&#23427;&#24182;&#27809;&#26377;&#21019;&#24314;&#23545;&#35937;&#65292;&#22240;&#20026;&#22312;&#20869;&#37096;&#24050;&#32463;&#25552;&#21069;&#21019;&#24314;&#22909;&#20004;&#20010;&#23545;&#35937;&#65292;&#22240;&#20026;&#23427;&#21482;&#26377;&#20004;&#31181;&#24773;&#20917;&#65292;&#36825;&#26679;&#20063;&#26159;&#20026;&#20102;&#36991;&#20813;&#37325;&#22797;&#21019;&#24314;&#22826;&#22810;&#30340;&#23545;&#35937;&#12290;</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">TRUE</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Boolean</span>(<span style="color: #AF87FF;">true</span>);

<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">Boolean</span> <span style="color: #FF8C00;">FALSE</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Boolean</span>(<span style="color: #AF87FF;">false</span>);
</pre>
</div></li>
<li><p>
拆箱操作
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">num1</span> = 400;
<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">num2</span> = 400;
System.out.println(num1 == num2); <span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
System.out.println(num1.equals(num2));  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
</pre>
</div>

<p>
equals 源码：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #AF87FF;">@Override</span>
<span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">boolean</span> <span style="color: #87D700;">equals</span>(<span style="color: #5FD7FF;">Object</span> <span style="color: #FF8C00;">o</span>) {
    <span style="color: #FF1493;">return</span> (o <span style="color: #FF1493;">instanceof</span> Integer) &amp;&amp; (((<span style="color: #5FD7FF;">Integer</span>) o).value == value);
}
</pre>
</div>
<p>
说明：指定equal比较的是内容本身，并且我也可看到 equals 的参数是一个Object对象，我们传入的是一个 int 类型，所以首先会进行装箱，然后比较。之所以返回 true，是由于它比较的是对象里面的 value 值。
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">num1</span> = 100;
<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">num2</span> = 100;
<span style="color: #5FD7FF;">Long</span> <span style="color: #FF8C00;">num3</span> = 200l;
System.out.println(num1 + num2);  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">200</span>
System.out.println(num3 == (num1 + num2));  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">true</span>
System.out.println(num3.equals(num1 + num2));  <span style="color: #8B8878;">//</span><span style="color: #8B8878;">false</span>
</pre>
</div>
<p>
说明：当一个基础数据类型与封装类进行==、+、-、*、/运算时，会将封装类进行拆箱，对基础数据类型进行运算。 对于num3.equals(num1 + num2)为false的原因，根据代码实现来说明。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #AF87FF;">@Override</span>
<span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">boolean</span> <span style="color: #87D700;">equals</span>(<span style="color: #5FD7FF;">Object</span> <span style="color: #FF8C00;">o</span>) {
    <span style="color: #FF1493;">return</span> (o <span style="color: #FF1493;">instanceof</span> Long) &amp;&amp; (((<span style="color: #5FD7FF;">Long</span>) o).value == value);
}
</pre>
</div>
<p>
所以，对于num3.equals(num1 + num2)为false的原因就是类型不同。
</p></li>
<li><p>
陷阱
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">Integer</span> <span style="color: #FF8C00;">integer100</span>=<span style="color: #AF87FF;">null</span>;
<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">int100</span>=integer100;
</pre>
</div>
<p>
这两行代码是完全合法的，完全能够通过编译的，但是在运行时，就会抛出空指针异常。其中，integer100为Integer类型的对象，它当然可以指向null。但在第二行时，就会对integer100进行拆箱，也就是对一个null对象执行intValue()方法，当然会抛出空指针异常。所以，有拆箱操作时一定要特别注意封装类对象是否为null。
</p></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgde20516" class="outline-4">
<h4 id="orgde20516"><span class="section-number-4">1.1.2</span> 重写(override)和重载(overload)</h4>
<div class="outline-text-4" id="text-1-1-2">
<ol class="org-ol">
<li>概念
<ul class="org-ul">
<li>Override：子类中和父类中的方法声明一模一样。</li>
<li>Overload：方法一样，参数或参数类型不一样。</li>
</ul></li>
<li>使用注意事项
<ul class="org-ul">
<li>父类中私有方法不能被重写</li>
<li>子类重写父类方法时，访问权限不能更低</li>
<li>父类静态方法，子类也必须通过静态方法进行重写。（算不上重写）</li>
<li>推荐：重写时，最好声明一模一样。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgb959636" class="outline-4">
<h4 id="orgb959636"><span class="section-number-4">1.1.3</span> 范型</h4>
<div class="outline-text-4" id="text-1-1-3">
<ol class="org-ol">
<li>概念
<ul class="org-ul">
<li>范型：在日常生活中，橡皮泥通过外力可以改变其形状，其形状是不固 定的。在Java中，通过泛型可以给开发带来方便，通过参数的指 定，可以改变其类型。</li>
</ul></li>
<li><p>
使用范型的优缺点
</p>
<ul class="org-ul">
<li>使代码看起来灵活，代码量减少，容易管理 ，不容易产生错误；</li>
<li>使用泛型在代码编译的时候能进行类型的检查并自动转换，使代码的运行效率得到提高；</li>
<li>使用泛型在编译进行自动转换的时候出现了错误，会进行错误提示；</li>
</ul>
<p>
-（缺点）在性能上不如数组快。
</p></li>
<li>常用通配符
<ul class="org-ul">
<li>使用大写字母A,B,C,D&#x2026;&#x2026;X,Y,Z定义的，就都是泛型，把T换成A也一样，这里T只是名字上的意义而已。</li>
<li>？ 表示不确定的java类型</li>
<li>T (type) 表示具体的一个java类型</li>
<li>K V (key value) 分别代表java键值中的Key Value</li>
<li>E (element) 代表Element</li>
<li>?和T区别是：？是一个不确定类，？和T都表示不确定的类型 ，但如果是T的话，函数里面可以对T进行操作，比方 T car = getCar()，而不能用？ car = getCar()。</li>
<li>Object和T不同点在于，Object是一个实打实的类,并没有泛指谁，可以直接给List中 add(new Object())</li>
</ul></li>
<li>Class&lt;T&gt; vs Class&lt;?&gt;
<ul class="org-ul">
<li>Class是什么呢，Class也是一个类，但Class是存放上面String,List,Map&#x2026;&#x2026;类信息的一个类，有点抽象。</li>
<li><p>
如何获取到Class类呢，有三种方式:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">List</span> <span style="color: #FF8C00;">list</span> = <span style="color: #AF87FF;">null</span>;
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = list.getClass();
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = Class.forName(<span style="color: #CDC673;">"com.lyang.demo.fanxing.People"</span>);
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = List.<span style="color: #FF1493;">class</span>;
</pre>
</div></li>
<li><p>
使用Class&lt;T&gt;和Class&lt;?&gt;多发生在反射场景下，如果我们不使用泛型，反射创建一个类是什么样的:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">People</span> <span style="color: #FF8C00;">people</span> = (<span style="color: #5FD7FF;">People</span>) Class.forName(<span style="color: #CDC673;">"com.lyang.demo.fanxing.People"</span>).newInstance();
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#38656;&#35201;&#24378;&#36716;&#65292;&#22914;&#26524;&#21453;&#23556;&#30340;&#31867;&#22411;&#19981;&#26159;People&#31867;&#65292;&#23601;&#20250;&#25253;java.lang.ClassCastException&#38169;&#35823;&#12290;</span>

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#20351;&#29992;Class&lt;T&gt;&#27867;&#22411;&#21518;&#65292;&#19981;&#29992;&#24378;&#36716;&#20102;</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Test</span> {
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">T</span> <span style="color: #87D700;">createInstance</span>(<span style="color: #5FD7FF;">Class</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #FF8C00;">clazz</span>) <span style="color: #FF1493;">throws</span> <span style="color: #5FD7FF;">IllegalAccessException</span>, <span style="color: #5FD7FF;">InstantiationException</span> {
        <span style="color: #FF1493;">return</span> clazz.newInstance();
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #5FD7FF;">void</span> <span style="color: #87D700;">main</span>(<span style="color: #5FD7FF;">String</span>[] <span style="color: #FF8C00;">args</span>)  <span style="color: #FF1493;">throws</span> <span style="color: #5FD7FF;">IllegalAccessException</span>, <span style="color: #5FD7FF;">InstantiationException</span>  {
            <span style="color: #5FD7FF;">Fruit</span> <span style="color: #FF8C00;">fruit</span>= createInstance(Fruit .<span style="color: #FF1493;">class</span>);
            <span style="color: #5FD7FF;">People</span> <span style="color: #FF8C00;">people</span>= createInstance(People.<span style="color: #FF1493;">class</span>);
    }
}
</pre>
</div></li>
<li>结论：
<ul class="org-ul">
<li>Class&lt;T&gt;在实例化的时候，T要替换成具体类</li>
<li><p>
Class&lt;?&gt;它是个通配泛型，?可以代表任何类型，主要用于声明时的限制情况
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#21487;&#20197;&#36825;&#26679;&#22768;&#26126;</span>
<span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Class</span>&lt;?&gt; <span style="color: #FF8C00;">clazz</span>;
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#20294;&#19981;&#21487;&#20197;&#36825;&#26679;</span>
<span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Class</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #FF8C00;">clazz</span>;
</pre>
</div></li>
</ul></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgbb41963" class="outline-4">
<h4 id="orgbb41963"><span class="section-number-4">1.1.4</span> Java 参数传递问题</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
参考链接：<a href="https://blog.csdn.net/bjweimengshu/article/details/79799485">https://blog.csdn.net/bjweimengshu/article/details/79799485</a>
<br />
</p>

<ol class="org-ol">
<li>误解
<ul class="org-ul">
<li>（1）值传递和引用传递，区分的条件是传递的内容，如果是个值，就是值传递。如果是个引用，就是引用传递。</li>
<li>（2）Java是引用传递。</li>
<li>（3）传递的参数如果是普通类型，那就是值传递，如果是对象，那就是引用传递。</li>
</ul></li>
<li>实参和形参
<ul class="org-ul">
<li>形式参数：是在定义函数名和函数体的时候使用的参数，目的是用来接收调用该函数时传入的参数。</li>
<li>实际参数：在调用有参函数时，主调函数和被调函数之间有数据传递关系。在主调函数中调用一个函数时，函数名后面括号中的参数称为“实际参数”。</li>
</ul></li>
<li><p>
值传递和引用传递
</p>
<ul class="org-ul">
<li>值传递（pass by value）是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</li>
<li>引用传递（pass by reference）是指在调用函数时将实际参数的地址直接传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</li>
</ul>

<p>
<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 值传递和引用传递</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">值传递</td>
<td class="org-left">引用传递</td>
</tr>

<tr>
<td class="org-left">根本区别</td>
<td class="org-left">会创建副本</td>
<td class="org-left">不创建副本</td>
</tr>

<tr>
<td class="org-left">结论</td>
<td class="org-left">函数中无法改变原始对象</td>
<td class="org-left">函数中可以改变原始对象</td>
</tr>
</tbody>
</table>

<p>
<br />
<b>举例：</b>
<img src="{{site.url}}/assets/images/value-example.png" alt="value-example.png" />
</p></li>
<li>Java 为什么只有值传递？</li>

<li>总结
<ul class="org-ul">
<li>Java中其实还是值传递的，只不过对于对象参数，值的内容是对象的引用。可以说，Java中的传递只有值传递。</li>
<li>无论是值传递还是引用传递，其实都是一种求值策略(Evaluation strategy)。在求值策略中，还有一种叫做按共享传递(call by sharing)。其实Java中的参数传递严格意义上说应该是按共享传递。</li>
<li>共享传递：指在调用函数时，传递给函数的是实参的地址的拷贝（如果实参在栈中，则直接拷贝该值）。在函数内部对参数进行操作时，需要先拷贝的地址寻找到具体的值，再进行操作。如果该值在栈中，那么因为是直接拷贝的值，所以函数内部对参数进行操作不会对外部变量产生影响。如果原来拷贝的是原值在堆中的地址，那么需要先根据该地址找到堆中对应的位置，再进行操作。因为传递的是地址的拷贝所以函数内对值的操作对外部变量是可见的。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orge8f592c" class="outline-4">
<h4 id="orge8f592c"><span class="section-number-4">1.1.5</span> 深拷贝和浅拷贝</h4>
<div class="outline-text-4" id="text-1-1-5">
</div>
<div id="outline-container-orgd694352" class="outline-5">
<h5 id="orgd694352"><span class="section-number-5">1.1.5.1</span> 概念</h5>
<div class="outline-text-5" id="text-1-1-5-1">
<dl class="org-dl">
<dt>浅拷贝（浅复制/浅克隆）</dt><dd>被复制对象的所有变量都含有与原来的对象相同的值，而所有的对其他对象的引用仍然指向原来的对象。换言之，浅复制仅仅复制所拥有的对象，而不复制它所引用的对象。</dd>
<dt>深拷贝（深复制/深复制）</dt><dd>被复制对象的所有变量都含有与原来的对象相同的值，除去那些引用其他对象的变量。那些引用其他对象的变量将指向被复制过的新对象，而不再是原有的那些被引用的对象。换言之，深复制把要复制的对象所引用的对象都复制了一遍。</dd>
</dl>
</div>
</div>
<div id="outline-container-org35bb000" class="outline-5">
<h5 id="org35bb000"><span class="section-number-5">1.1.5.2</span> java Cloneable 接口（浅拷贝）</h5>
<div class="outline-text-5" id="text-1-1-5-2">
<ol class="org-ol">
<li>clone()
<br />
clone方法将对象复制了一份并返回给调用者。一般而言，clone() 方法满足：
<ul class="org-ul">
<li>对任何的对象x，都有x.clone() !=x//克隆对象与原对象不是同一个对象</li>
<li>对任何的对象x，都有x.clone().getClass()==x.getClass()//克隆对象与原对象的类型一样</li>
<li>如果对象x的equals()方法定义恰当，那么x.clone().equals(x)应该成立。</li>
</ul></li>

<li>Java中对象的克隆
<ul class="org-ul">
<li>为了获取对象的一份拷贝，我们可以利用Object类的clone()方法。</li>
<li>在派生类中覆盖基类的clone()方法，并声明为public。</li>
<li>在派生类的clone()方法中，调用super.clone()。</li>
<li>在派生类中实现Cloneable接口。</li>
</ul></li>
<li><p>
代码实现
<br />
基于Object#clone方法实现对象复制，但是Object#clone是protected方法，在覆写时，需要改成public修饰。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Address</span> <span style="color: #FF1493;">implements</span> <span style="color: #5FD7FF;">Cloneable</span> {
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">street</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">city</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">country</span>;
    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">standard constructors, getters and setters</span>

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">... ...</span>

    <span style="color: #AF87FF;">@Override</span> <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Object</span> <span style="color: #87D700;">clone</span>(){
        <span style="color: #FF1493;">try</span> {
            <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">super</span>.clone();
        } <span style="color: #FF1493;">catch</span> (<span style="color: #5FD7FF;">CloneNotSupportedException</span> <span style="color: #FF8C00;">e</span>) {
            <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Address</span>(<span style="color: #FF1493;">this</span>.street, <span style="color: #FF1493;">this</span>.getCity(), <span style="color: #FF1493;">this</span>.getCountry());
        }
    }
}

<span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">User</span> <span style="color: #FF1493;">implements</span> <span style="color: #5FD7FF;">Cloneable</span> {
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">name</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Address</span> <span style="color: #FF8C00;">address</span>;

    <span style="color: #8B8878;">//</span><span style="color: #8B8878;">standard constructors, getters and setters</span>

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">... ...</span>

    <span style="color: #AF87FF;">@Override</span> <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Object</span> <span style="color: #87D700;">clone</span>() {
        <span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">user</span>;
        <span style="color: #FF1493;">try</span> {
            <span style="color: #8B8878;">// </span><span style="color: #8B8878;">super.clone&#26041;&#27861;&#23454;&#29616;&#30340;&#26159;&#27973;&#25335;&#36125;&#65292;&#22240;&#27492;&#36820;&#22238;&#30340;&#20026;&#27973;&#25335;&#36125;&#23545;&#35937;&#12290;&#25105;&#20204;&#38656;&#35201;&#23545;&#20110;&#21487;&#21464;&#23545;&#35937;&#30340;&#23646;&#24615;&#65292;&#37325;&#26032;&#35774;&#32622;&#26032;&#30340;&#20540;&#12290;</span>
            user = (User) <span style="color: #FF1493;">super</span>.clone();
        } <span style="color: #FF1493;">catch</span> (<span style="color: #5FD7FF;">CloneNotSupportedException</span> <span style="color: #FF8C00;">e</span>) {
            user = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>(<span style="color: #FF1493;">this</span>.getName(), <span style="color: #FF1493;">this</span>.getAddress());
        }
        user.address = (<span style="color: #5FD7FF;">Address</span>) <span style="color: #FF1493;">this</span>.address.clone();
        <span style="color: #FF1493;">return</span> user;
    }
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">import</span> <span style="color: #FF1493;">static</span> <span style="color: #AF87FF;">org</span>.<span style="color: #AF87FF;">junit</span>.Assert.<span style="color: #5FD7FF;">assertThat</span>;

<span style="color: #5FD7FF;">Address</span> <span style="color: #FF8C00;">address</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Address</span>(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;380&#21495;"</span>, <span style="color: #CDC673;">"&#26477;&#24030;"</span>, <span style="color: #CDC673;">"&#20013;&#22269;"</span>);
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">origin</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>(<span style="color: #CDC673;">"&#21992;&#30382;&#30340;&#23401;&#23376;"</span>, address);
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">shallowCopy</span> = (<span style="color: #5FD7FF;">User</span>) origin.clone();
address.setStreet(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;381&#21495;"</span>);
assertThat(shallowCopy.getAddress().getStreet(), not(equalTo(origin.getAddress().getStreet())));
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-org3dc5cdf" class="outline-5">
<h5 id="org3dc5cdf"><span class="section-number-5">1.1.5.3</span> 序列化方式（深拷贝）</h5>
<div class="outline-text-5" id="text-1-1-5-3">
<ol class="org-ol">
<li>概念
<br />
把对象写到流里的过程是串行化（Serilization）过程；而把对象从流中读出来是并行化（Deserialization）过程。</li>
<li><p>
源代码
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Object</span> <span style="color: #87D700;">deepClone</span>() {    
    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#23558;&#23545;&#35937;&#20889;&#21040;&#27969;&#37324;    </span>
    <span style="color: #5FD7FF;">ByteArrayOutoutStream</span> <span style="color: #FF8C00;">bo</span>=<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ByteArrayOutputStream</span>();    
    <span style="color: #5FD7FF;">ObjectOutputStream</span> <span style="color: #FF8C00;">oo</span>=<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ObjectOutputStream</span>(bo);    
    oo.writeObject(<span style="color: #FF1493;">this</span>);    

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#20174;&#27969;&#37324;&#35835;&#20986;&#26469;    </span>
    <span style="color: #5FD7FF;">ByteArrayInputStream</span> <span style="color: #FF8C00;">bi</span>=<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ByteArrayInputStream</span>(bo.toByteArray());    
    <span style="color: #5FD7FF;">ObjectInputStream</span> <span style="color: #FF8C00;">oi</span>=<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ObjectInputStream</span>(bi);    
    <span style="color: #FF1493;">return</span>(oi.readObject());    
} 
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-orgda5375d" class="outline-5">
<h5 id="orgda5375d"><span class="section-number-5">1.1.5.4</span> 第三方库：使用 Apache Commons Lang（深拷贝，推荐）</h5>
<div class="outline-text-5" id="text-1-1-5-4">
<p>
Apache Commons Lang有SerializationUtils#clone方法，使用该方法可以深度复制出对象图中所有实现Serializable接口对象。此方法要求对象中的类都实现Serializable接口，否则会抛出SerializationException。
</p>
<div class="org-src-container">
<pre class="src src-java" id="org9754f77"><span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Address</span> <span style="color: #FF1493;">implements</span> <span style="color: #5FD7FF;">Serializable</span>, <span style="color: #5FD7FF;">Cloneable</span> {
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">street</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">city</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">country</span>;
    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">standard constructors, getters and setters</span>

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">... ...</span>

    <span style="color: #AF87FF;">@Override</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Object</span> <span style="color: #87D700;">clone</span>() {
        <span style="color: #FF1493;">try</span> {
            <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">super</span>.clone();
        } <span style="color: #FF1493;">catch</span> (<span style="color: #5FD7FF;">CloneNotSupportedException</span> <span style="color: #FF8C00;">e</span>) {
            <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Address</span>(<span style="color: #FF1493;">this</span>.street, <span style="color: #FF1493;">this</span>.getCity(), <span style="color: #FF1493;">this</span>.getCountry());
        }
    }
}

<span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">User</span> <span style="color: #FF1493;">implements</span> <span style="color: #5FD7FF;">Serializable</span>, <span style="color: #5FD7FF;">Cloneable</span> {
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">name</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Address</span> <span style="color: #FF8C00;">address</span>;

    <span style="color: #8B8878;">//</span><span style="color: #8B8878;">standard constructors, getters and setters</span>

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">... ...</span>

    <span style="color: #AF87FF;">@Override</span> <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Object</span> <span style="color: #87D700;">clone</span>() {
        <span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">user</span>;
        <span style="color: #FF1493;">try</span> {
            user = (User) <span style="color: #FF1493;">super</span>.clone();
        } <span style="color: #FF1493;">catch</span> (<span style="color: #5FD7FF;">CloneNotSupportedException</span> <span style="color: #FF8C00;">e</span>) {
            user = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>(<span style="color: #FF1493;">this</span>.getName(), <span style="color: #FF1493;">this</span>.getAddress());
        }
        user.address = (<span style="color: #5FD7FF;">Address</span>) <span style="color: #FF1493;">this</span>.address.clone();
        <span style="color: #FF1493;">return</span> user;
    }
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java" id="orgf396b56"><span style="color: #FF1493;">import</span> <span style="color: #AF87FF;">org</span>.<span style="color: #AF87FF;">apache</span>.<span style="color: #AF87FF;">commons</span>.<span style="color: #AF87FF;">lang</span>.<span style="color: #5FD7FF;">SerializationUtils</span>;

<span style="color: #5FD7FF;">Address</span> <span style="color: #FF8C00;">address</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Address</span>(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;380&#21495;"</span>, <span style="color: #CDC673;">"&#26477;&#24030;"</span>, <span style="color: #CDC673;">"&#20013;&#22269;"</span>);
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">origin</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>(<span style="color: #CDC673;">"&#21992;&#30382;&#30340;&#23401;&#23376;"</span>, address);
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">shallowCopy</span> = (<span style="color: #5FD7FF;">User</span>) SerializationUtils.clone(origin);
address.setStreet(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;381&#21495;"</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfcf30b0" class="outline-5">
<h5 id="orgfcf30b0"><span class="section-number-5">1.1.5.5</span> 第三方库：使用 Gson 的 JSON 系列化（深拷贝，推荐）</h5>
<div class="outline-text-5" id="text-1-1-5-5">
<p>
使用 Json 系列化方式，也可以的达到深度复制，Gson 库可以用来将对象转为 JSON，或从 JSON 转为对象。Gson 不要求类实现 Serializable 接口。
</p>
<div class="org-src-container">
<pre class="src src-java" id="org5c18bbe"><span style="color: #FF1493;">import</span> <span style="color: #AF87FF;">com</span>.<span style="color: #AF87FF;">google</span>.<span style="color: #AF87FF;">gson</span>.<span style="color: #5FD7FF;">Gson</span>;

<span style="color: #5FD7FF;">Address</span> <span style="color: #FF8C00;">address</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Address</span>(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;380&#21495;"</span>, <span style="color: #CDC673;">"&#26477;&#24030;"</span>, <span style="color: #CDC673;">"&#20013;&#22269;"</span>);
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">origin</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>(<span style="color: #CDC673;">"&#21992;&#30382;&#30340;&#23401;&#23376;"</span>, address);
<span style="color: #5FD7FF;">Gson</span> <span style="color: #FF8C00;">gson</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Gson</span>();
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">shallowCopy</span> = gson.fromJson(gson.toJson(origin), User.<span style="color: #FF1493;">class</span>);
address.setStreet(<span style="color: #CDC673;">"&#35199;&#28246;&#21306;&#20016;&#28525;&#36335;381&#21495;"</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcda7e9f" class="outline-5">
<h5 id="orgcda7e9f"><span class="section-number-5">1.1.5.6</span> 第三方库：使用 Jackson 的 JSON 系列化（深拷贝，推荐）</h5>
<div class="outline-text-5" id="text-1-1-5-6">
<p>
Jackson 实现上类似于 Gson，但是我们需要给类提供默认构造函数。
</p>
<div class="org-src-container">
<pre class="src src-java" id="org95a21df"><span style="color: #FF1493;">import</span> <span style="color: #AF87FF;">com</span>.<span style="color: #AF87FF;">fasterxml</span>.<span style="color: #AF87FF;">jackson</span>.<span style="color: #AF87FF;">databind</span>.<span style="color: #5FD7FF;">ObjectMapper</span>;
<span style="color: #5FD7FF;">Invoice</span> <span style="color: #FF8C00;">invoice</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Invoice</span>(<span style="color: #CDC673;">"id123"</span>,<span style="color: #CDC673;">"blue"</span>);

<span style="color: #5FD7FF;">ObjectMapper</span> <span style="color: #FF8C00;">objectMapper</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ObjectMapper</span>();
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#21152;&#20837;&#27492;&#34892;&#20195;&#30721;&#65292;&#35299;&#20915; "Cannot construct instance of `java.time.LocalDateTime` (no Creators, like default construct, exist):</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">cannot deserialize from Object value (no delegate- or property-based Creator)"</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">Stack Overflow&#65306;https://stackoverflow.com/questions/45863678/json-parse-error-can-not-construct-instance-of-java-time-localdate-no-string-a</span>
objectMapper.registerModule(<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">JavaTimeModule</span>());
<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">writeValueAsString</span> = objectMapper.writeValueAsString(invoice);
<span style="color: #5FD7FF;">Invoice</span> <span style="color: #FF8C00;">invoiceCopy</span> = objectMapper.readValue(writeValueAsString, Invoice.<span style="color: #FF1493;">class</span>);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1003d31" class="outline-4">
<h4 id="org1003d31"><span class="section-number-4">1.1.6</span> 反射</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
反射：在日常生活中，通过放大镜可以看清楚物体的内部结构。在Java 中，反射机制就是起到放大镜的效果，可以通过类名，加载这个 类，显示出这个类的方法等信息。
</p>
<div class="org-src-container">
<pre class="src src-java" id="orgdacc988"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * Java &#21453;&#23556;</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;class&#65288;&#26041;&#24335;1&#65289;</span>
<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">path</span> = <span style="color: #CDC673;">"com.zrg.myReflection.bean.User"</span>;
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = Class.forName(path);
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;class&#65288;&#26041;&#24335;2&#65289;</span>
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = User.<span style="color: #FF1493;">class</span>;
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;class&#65288;&#26041;&#24335;3&#65289;</span>
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">user</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">User</span>();
<span style="color: #5FD7FF;">Class</span> <span style="color: #FF8C00;">clazz</span> = user.getClass();

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#31867;&#21517;</span>
<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">strName01</span> = clazz.getName();<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#23436;&#25972;&#31867;&#21517;com.zrg.myReflection.bean.User</span>
<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">strName02</span> = clazz.getSimpleName();<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#30452;&#25509;&#33719;&#21462;&#31867;&#21517; User</span>

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#26222;&#36890;&#26041;&#27861;</span>
<span style="color: #5FD7FF;">Method</span>[] <span style="color: #FF8C00;">Method01</span> = clazz.getDeclaredMethods(); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36820;&#22238;public&#26041;&#27861;</span>
<span style="color: #5FD7FF;">Method</span> <span style="color: #FF8C00;">method</span> = clazz.getDeclaredMethod(<span style="color: #CDC673;">"getId"</span>, <span style="color: #AF87FF;">null</span>); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36820;&#22238;getId&#36825;&#20010;&#26041;&#27861;&#65292;&#22914;&#26524;&#27809;&#26377;&#21442;&#25968;&#65292;&#23601;&#40664;&#35748;&#20026;null</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#26500;&#36896;&#26041;&#27861;</span>
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">u1</span> = (<span style="color: #5FD7FF;">User</span>) clazz.newInstance(); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#26080;&#21442;&#30340;&#26500;&#36896;&#20989;&#25968;&#36825;&#37324;&#30340;&#21069;&#25552;&#30340;&#20445;&#35777;&#31867;&#20013;&#24212;&#35813;&#26377;&#26080;&#21442;&#30340;&#26500;&#36896;&#20989;&#25968;</span>
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#21442;&#25968;&#20026;(int,String,int)&#30340;&#26500;&#36896;&#20989;&#25968;</span>
<span style="color: #5FD7FF;">Constructor</span> <span style="color: #FF8C00;">c2</span> = clazz.getDeclaredConstructor(<span style="color: #5FD7FF;">int</span>.<span style="color: #FF1493;">class</span>, String.<span style="color: #FF1493;">class</span>, <span style="color: #5FD7FF;">int</span>.<span style="color: #FF1493;">class</span>);
<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36890;&#36807;&#26377;&#21442;&#26500;&#36896;&#20989;&#25968;&#21019;&#24314;&#23545;&#35937;</span>
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">u2</span> = (<span style="color: #5FD7FF;">User</span>) c2.newInstance(1001, <span style="color: #CDC673;">"&#23567;&#23567;"</span>, 18);

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36890;&#36807;&#21453;&#23556;&#35843;&#29992;&#26222;&#36890;&#26041;&#27861;</span>
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">u3</span> = (<span style="color: #5FD7FF;">User</span>) clazz.newInstance();
<span style="color: #5FD7FF;">Method</span> <span style="color: #FF8C00;">method03</span> = clazz.getDeclaredMethod(<span style="color: #CDC673;">"setId"</span>, <span style="color: #5FD7FF;">int</span>.<span style="color: #FF1493;">class</span>);
method.invoke(u3, 1002); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#25226;&#23545;&#35937;u3&#30340;id&#35774;&#32622;&#20026;1002</span>

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36890;&#36807;&#21453;&#23556;&#25805;&#20316;&#26222;&#36890;&#30340;&#23646;&#24615;</span>
<span style="color: #5FD7FF;">User</span> <span style="color: #FF8C00;">u4</span> = (<span style="color: #5FD7FF;">User</span>) clazz.newInstance();
<span style="color: #5FD7FF;">Field</span> <span style="color: #FF8C00;">f</span> = clazz.getDeclaredField(<span style="color: #CDC673;">"name"</span>);
f.setAccessible(<span style="color: #AF87FF;">true</span>); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#35774;&#32622;&#23646;&#24615;&#21487;&#20197;&#30452;&#25509;&#30340;&#36827;&#34892;&#35775;&#38382;</span>
f.set(u4, <span style="color: #CDC673;">"&#30707;&#22836;"</span>);

<span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#23646;&#24615;&#12289;&#23646;&#24615;&#20540;</span>
<span style="color: #5FD7FF;">Field</span>[] <span style="color: #FF8C00;">fields</span> = clazz.getDeclaredFields(); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36820;&#22238;&#25152;&#26377;&#30340;&#23646;&#24615;</span>
<span style="color: #5FD7FF;">Field</span>[] <span style="color: #FF8C00;">fields</span> = clazz.getFields(); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#36820;&#22238;&#23646;&#24615;&#20026;public&#30340;&#23383;&#27573;</span>
<span style="color: #5FD7FF;">Field</span> <span style="color: #FF8C00;">field</span> = clazz.getDeclaredField(<span style="color: #CDC673;">"id"</span>); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#23646;&#24615;&#20026;id&#30340;&#23383;&#27573;</span>
<span style="color: #FF1493;">for</span> (<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">field</span> : fields) {
    <span style="color: #FF1493;">try</span> {
        field.setAccessible(<span style="color: #AF87FF;">true</span>); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#35774;&#32622;&#31169;&#26377;&#23646;&#24615;&#20801;&#35768;&#35775;&#38382;</span>
        <span style="color: #5FD7FF;">Object</span> <span style="color: #FF8C00;">value</span> = field.get(clazz); <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#33719;&#21462;&#23646;&#24615;&#20540;</span>
    }<span style="color: #FF1493;">catch</span>(<span style="color: #5FD7FF;">Exception</span> <span style="color: #FF8C00;">e</span>){
        e.printStackTrace();
    }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdfe35ae" class="outline-3">
<h3 id="orgdfe35ae"><span class="section-number-3">1.2</span> Java 面向对象</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orga9594db" class="outline-4">
<h4 id="orga9594db"><span class="section-number-4">1.2.1</span> String vs StringBuffer vs StringBuilder</h4>
<div class="outline-text-4" id="text-1-2-1">
<ol class="org-ol">
<li>不可变性
<ul class="org-ul">
<li><p>
String 类长度是不可变的，因为 String 类中使用 final 关键字修饰数组来保存字符串，所以 String 对象不可变。
</p>
<div class="org-src-container">
<pre class="src src-java" id="org533494f"><span style="color: #FF1493;">private</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">char</span> <span style="color: #FF8C00;">value</span>[];
</pre>
</div></li>
<li>StringBuffer 和 StringBuilder 类都继承自 ﻿AbstractStringBuilder 类，也是使用字符数组来保存字符串 char[] value，但是没有final关键字修饰，所以两种对象是可改变的。</li>
</ul></li>
<li>线程安全性
<ul class="org-ul">
<li>StringBuffer 对方法加了同步锁或着对调用的方法加了同步锁，所以 StringBuffer 是线程安全的；</li>
<li>StringBuilder 并没有对方法加同步锁，所以 StringBuilder 是非线程安全。</li>
</ul></li>
<li>性能方面
<ul class="org-ul">
<li>String 是不可变的对象，因此每次在对 String 类进行改变的时候都会生成一个新的 String 对象，然后将指针指向新的 String 对象，所以经常要改变字符串长度的话不要使用 String，因为每次生成对象都会对系统性能产生影响，特别是当内存中引用的对象多了以后，JVM 的 GC 就会开始工作，性能就会降低；</li>
<li>使用 StringBuffer 类时，每次都会对 StringBuffer 对象本身进行操作，而不是生成新的对象并改变对象引用，所以多数情况下推荐使用 StringBuffer，特别是字符串对象经常要改变的情况；</li>
<li>在某些情况下，String 对象的字符串拼接其实是被 Java Compiler 编译成了 StringBuffer 对象的拼接，所以这时 String 对象的速度并不会比 StringBuffer 对象慢。</li>
<li>相同情况下，使用 StirngBuilder 相比使用 StringBuffer 仅能获得 10%~15% 左右的性能提升，但却要冒多线程不安全的风险。而在现实的模块化编程中，负责某一模块的程序员不一定能清晰地判断该模块是否会放入多线程的环境中运行，因此：除非确定系统的瓶颈是在 StringBuffer 上，并且确定你的模块不会运行在多线程模式下，才可以采用StringBuilder；否则还是用StringBuffer。</li>
</ul></li>
<li>StringBuilder 是 5.0 新增的，此类提供一个与 StringBuffer 兼容的 API，但不保证同步。该类被设计用作 StringBuffer 的一个简易替换，用在字符串缓冲区被单个线程使用（这种情况很普遍）。如果可能，建议优先采用该类，因为在大多数实现中，它比 StringBuffer 要快。两者的方法基本相同；</li>
<li>使用策略：
<ul class="org-ul">
<li>基本原则：如果要操作少量的数据，用 String 。</li>
<li>单线程操作大量数据，用 StringBuilder 。</li>
<li>多线程操作大量数据，用 StringBuffer。</li>
<li>不要使用 String 类的”+”来进行频繁的拼接，因为那样的性能极差的，应该使用 StringBuffer 或 StringBuilder 类。</li>
<li>StringBuilder 一般使用在方法内部来完成类似”+”功能，因为是线程不安全的，所以用完以后可以丢弃。StringBuffer 主要用在全局变量中。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-org2b606cb" class="outline-4">
<h4 id="org2b606cb"><span class="section-number-4">1.2.2</span> == vs equals</h4>
<div class="outline-text-4" id="text-1-2-2">
<ol class="org-ol">
<li>==：判断两个对象的地址是不是相等。即判断两个对象是不是同一个对象(基本数据类型==比较的是值，引用数据类型==比较的是内存地址)。</li>
<li>equals 方法是基类 Object 中的方法，因此对于所有的继承于 Object 的类都会有该方法。在 Object 类中，equals 方法是用来比较两个对象的引用是否相等，即是否指向同一个对象。它一般分两种使用情况：
<ul class="org-ul">
<li>情况1：如果没有对 equals 方法进行重写，则比较的是引用类型的变量所指向的对象的地址，等价于通过“==”比较。</li>
<li>情况2：如果对 equals 方法进行了重写，用来比较两个对象的内容（所存储的字符串）是否相等，相等则返回 true。其他的一些类诸如 Double，Date，Integer 等，都对 equals 方法进行了重写，用来比较指向的对象所存储的内容是否相等。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgeae939b" class="outline-4">
<h4 id="orgeae939b"><span class="section-number-4">1.2.3</span> hashCode 和 equals</h4>
<div class="outline-text-4" id="text-1-2-3">
<pre class="example">
面试问题：“你重写过 hashcode 和 equals 么，为什么重写 equals 时必须重写 hashCode 方法？”
</pre>

<ol class="org-ol">
<li>hashCode（）介绍
<ul class="org-ul">
<li>hashCode() 的作用是获取哈希码，也称为散列码；它实际上是返回一个 int 整数。这个哈希码的作用是确定该对象在哈希表中的索引位置。hashCode() 定义在 JDK 的 Object.java 中，这就意味着 Java 中的任何类都包含有 hashCode() 函数。</li>
<li>散列表存储的是键值对(key-value)，它的特点是：能根据 key 快速的检索出对应的 value。这其中就利用到了哈希码！（可以快速找到所需要的对象）</li>
</ul></li>
<li>为什么要有 hashCode
<dl class="org-dl">
<dt>以“HashSet 如何检查重复”为例子来说明为什么要有 hashCode</dt><dd>当把对象加入 HashSet 时，HashSet 会先计算对象的 hashcode 值来判断对象加入的位置，同时也会与该位置其他已经加入的对象的 hashcode 值作比较，如果没有相符的 hashcode，HashSet 会假设对象没有重复出现。但是如果发现有相同 hashcode 值的对象，这时会调用 equals() 方法来检查 hashcode 相等的对象是否真的相同。如果两者相同，HashSet 就不会让其加入操作成功。如果不同的话，就会重新散列到其他位置。（摘自我的 Java 启蒙书《Head first java》第二版）。这样我们就大大减少了 equals 的次数，相应就大大提高了执行速度。</dd>
<dt>(no term)</dt><dd>可以看出： hashCode() 的作用就是获取哈希码；它实际上是返回一个 int 整数。这个哈希码的作用是确定该对象在哈希表中的索引位置。 hashCode() 在散列表中才有用，在其它情况下没用。在散列表中 hashCode() 的作用是获取对象的散列码，进而确定该对象在散列表中的位置。</dd>
</dl></li>
<li>hashCode（）与 equals（）约定
<ul class="org-ul">
<li>如果两个对象相等，则 hashcode 一定也是相同的。</li>
<li>两个对象相等,对两个对象分别调用 equals 方法都返回 true。</li>
<li>两个对象有相同的 hashcode 值，它们也不一定是相等的。</li>
<li>equals 方法被覆盖过，则 hashCode 方法也必须被覆盖。</li>
<li>hashCode() 的默认行为是对堆上的对象产生独特值。如果没有重写 hashCode()，则该 class 的两个对象无论如何都不会相等（即使这两个对象指向相同的数据）。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orga5dbd2b" class="outline-4">
<h4 id="orga5dbd2b"><span class="section-number-4">1.2.4</span> Java 序列化中如果有些字段不想进行序列化，怎么办？</h4>
<div class="outline-text-4" id="text-1-2-4">
<ol class="org-ol">
<li>对于不想进行序列化的变量，使用 transient 关键字修饰。</li>
<li>transient 关键字的作用是：阻止实例中那些用此关键字修饰的的变量序列化；当对象被反序列化时，被 transient 修饰的变量值不会被持久化和恢复。transient 只能修饰变量，不能修饰类和方法。</li>
</ol>
</div>
</div>
<div id="outline-container-orgd928e67" class="outline-4">
<h4 id="orgd928e67"><span class="section-number-4">1.2.5</span> 获取用键盘输入常用的两种方法</h4>
<div class="outline-text-4" id="text-1-2-5">
<p>
<b>方法 1：通过 Scanner</b>
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">Scanner</span> <span style="color: #FF8C00;">input</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Scanner</span>(System.in);
<span style="color: #5FD7FF;">tring</span> <span style="color: #FF8C00;">s</span> = input.nextLine();
input.close();
</pre>
</div>

<p>
<b>方法 2：通过 BufferedReader</b>
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #5FD7FF;">BufferedReader</span> <span style="color: #FF8C00;">input</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">BufferedReader</span>(<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">InputStreamReader</span>(System.in));
<span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">s</span> = input.readLine();
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org018f591" class="outline-3">
<h3 id="org018f591"><span class="section-number-3">1.3</span> Java 核心技术</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org581ca8e" class="outline-4">
<h4 id="org581ca8e"><span class="section-number-4">1.3.1</span> 集合</h4>
</div>
<div id="outline-container-org5f3b918" class="outline-4">
<h4 id="org5f3b918"><span class="section-number-4">1.3.2</span> 错误与异常</h4>
</div>
<div id="outline-container-org4787a89" class="outline-4">
<h4 id="org4787a89"><span class="section-number-4">1.3.3</span> 多线程</h4>
</div>
<div id="outline-container-orge9c1c42" class="outline-4">
<h4 id="orge9c1c42"><span class="section-number-4">1.3.4</span> I/O流：BIO,NIO,AIO 有什么区别?</h4>
<div class="outline-text-4" id="text-1-3-4">
<ol class="org-ol">
<li>BIO (Blocking I/O): 同步阻塞 I/O 模式，数据的读取写入必须阻塞在一个线程内等待其完成。在活动连接数不是特别高（小于单机 1000）的情况下，这种模型是比较不错的，可以让每一个连接专注于自己的 I/O 并且编程模型简单，也不用过多考虑系统的过载、限流等问题。线程池本身就是一个天然的漏斗，可以缓冲一些系统处理不了的连接或请求。但是，当面对十万甚至百万级连接的时候，传统的 BIO 模型是无能为力的。因此，我们需要一种更高效的 I/O 处理模型来应对更高的并发量。</li>
<li>NIO (Non-blocking/New I/O): NIO 是一种同步非阻塞的 I/O 模型，在 Java 1.4 中引入了 NIO 框架，对应 java.nio 包，提供了 Channel , Selector，Buffer 等抽象。NIO 中的 N 可以理解为 Nonblocking，不单纯是 New。它支持面向缓冲的，基于通道的 I/O 操作方法。 NIO 提供了与传统BIO 模型中的 Socket 和 ServerSocket 相对应的 SocketChannel 和 ServerSocketChannel 两种不同的套接字通道实现,两种通道都支持阻塞和非阻塞两种模式。阻塞模式使用就像传统中的支持一样，比较简单，但是性能和可靠性都不好；非阻塞模式正好与之相反。对于低负载、低并发的应用程序，可以使用同步阻塞 I/O 来提升开发速率和更好的维护性；对于高负载、高并发的（网络）应用，应使用 NIO 的非阻塞模式来开发</li>
<li>AIO (Asynchronous I/O): AIO 也就是 NIO 2。在 Java 7 中引入了 NIO 的改进版 NIO 2,它是异步非阻塞的 IO 模型。异步 IO 是基于事件和回调机制实现的，也就是应用操作之后会直接返回，不会堵塞在那里，当后台处理完成，操作系统会通知相应的线程进行后续的操作。AIO 是异步 IO 的缩写，虽然 NIO 在网络操作中，提供了非阻塞的方法，但是 NIO 的 IO 行为还是同步的。对于NIO 来说，我们的业务线程是在 IO 操作准备好时，得到通知，接着就由这个线程自行进行 IO 操作，IO 操作本身是同步的。查阅网上相关资料，我发现就目前来说 AIO 的应用还不是很广泛，Netty 之前也尝试使用过 AIO，不过又放弃了。</li>
</ol>
</div>
</div>
</div>
</div>
<div id="outline-container-org08c4443" class="outline-2">
<h2 id="org08c4443"><span class="section-number-2">2</span> Java 容器</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orge72d0e4" class="outline-3">
<h3 id="orge72d0e4"><span class="section-number-3">2.1</span> ArrayList</h3>
</div>
<div id="outline-container-org09f5c8c" class="outline-3">
<h3 id="org09f5c8c"><span class="section-number-3">2.2</span> LinkedList</h3>
</div>
<div id="outline-container-orgc252a17" class="outline-3">
<h3 id="orgc252a17"><span class="section-number-3">2.3</span> HashMap</h3>
</div>
<div id="outline-container-org6fb9653" class="outline-3">
<h3 id="org6fb9653"><span class="section-number-3">2.4</span> TreeMap</h3>
</div>
</div>
<div id="outline-container-org9dc70af" class="outline-2">
<h2 id="org9dc70af"><span class="section-number-2">3</span> Java 并发编程</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgdb46620" class="outline-3">
<h3 id="orgdb46620"><span class="section-number-3">3.1</span> JDK 提供的并发容器</h3>
</div>
<div id="outline-container-org7814cd6" class="outline-3">
<h3 id="org7814cd6"><span class="section-number-3">3.2</span> 线程池</h3>
</div>
<div id="outline-container-org76e1d88" class="outline-3">
<h3 id="org76e1d88"><span class="section-number-3">3.3</span> 乐观锁和悲观锁</h3>
</div>
<div id="outline-container-orga157e28" class="outline-3">
<h3 id="orga157e28"><span class="section-number-3">3.4</span> Aomic 原子类</h3>
</div>
<div id="outline-container-org9a7cee1" class="outline-3">
<h3 id="org9a7cee1"><span class="section-number-3">3.5</span> AQS</h3>
</div>
</div>
<div id="outline-container-orgdce5edd" class="outline-2">
<h2 id="orgdce5edd"><span class="section-number-2">4</span> Java 虚拟机（JVM）</h2>
</div>
<div id="outline-container-org300f9ed" class="outline-2">
<h2 id="org300f9ed"><span class="section-number-2">5</span> Java 常用应用技术</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org1e0ab1d" class="outline-3">
<h3 id="org1e0ab1d"><span class="section-number-3">5.1</span> Spring 系列框架</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-orgc81e7eb" class="outline-4">
<h4 id="orgc81e7eb"><span class="section-number-4">5.1.1</span> Spring Validation 参数校验</h4>
<div class="outline-text-4" id="text-5-1-1">
</div>
<div id="outline-container-org0cd7ba1" class="outline-5">
<h5 id="org0cd7ba1"><span class="section-number-5">5.1.1.1</span> 参数校验的使用</h5>
<div class="outline-text-5" id="text-5-1-1-1">
<ol class="org-ol">
<li><p>
Valid 和 Validated 的区别
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Valid</th>
<th scope="col" class="org-left">Validated</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">提供者</td>
<td class="org-left">JSR-303规范</td>
<td class="org-left">Spring</td>
</tr>

<tr>
<td class="org-left">是否支持分组</td>
<td class="org-left">不支持</td>
<td class="org-left">支持</td>
</tr>

<tr>
<td class="org-left">标注位置</td>
<td class="org-left">METHOD, FIELD, CONSTRUCTOR, PARAMETER, TYPE_USE</td>
<td class="org-left">TYPE, METHOD, PARAMETER</td>
</tr>

<tr>
<td class="org-left">嵌套校验</td>
<td class="org-left">支持</td>
<td class="org-left">不支持</td>
</tr>
</tbody>
</table></li>

<li><p>
引入依赖
</p>
<pre class="example">
如果spring-boot版本小于2.3.x，spring-boot-starter-web会自动传入hibernate-validator依赖。
如果spring-boot版本大于2.3.x，则需要手动引入依赖：
</pre>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #87D700;">dependency</span>&gt;
    &lt;<span style="color: #87D700;">groupId</span>&gt;org.hibernate&lt;/<span style="color: #87D700;">groupId</span>&gt;
    &lt;<span style="color: #87D700;">artifactId</span>&gt;hibernate-validator&lt;/<span style="color: #87D700;">artifactId</span>&gt;
    &lt;<span style="color: #87D700;">version</span>&gt;6.0.1.Final&lt;/<span style="color: #87D700;">version</span>&gt;
&lt;/<span style="color: #87D700;">dependency</span>&gt;
</pre>
</div></li>

<li>预定义对象的说明
<dl class="org-dl">
<dt>接口统一返回 ReturnResult 定义</dt><dd><div class="org-src-container">
<pre class="src src-java"><span style="color: #FF1493;">import</span> <span style="color: #AF87FF;">lombok</span>.<span style="color: #5FD7FF;">Data</span>;
<span style="color: #FF1493;">import</span> <span style="color: #AF87FF;">lombok</span>.<span style="color: #AF87FF;">experimental</span>.<span style="color: #5FD7FF;">Accessors</span>;

<span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * Return Result</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@Data</span>
<span style="color: #AF87FF;">@Accessors</span>(chain = <span style="color: #AF87FF;">true</span>)
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">ReturnResult</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; {
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">code</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">message</span>;
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">T</span> <span style="color: #FF8C00;">data</span>;

    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">boolean</span> <span style="color: #87D700;">ok</span>() {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">this</span>.code == 0;
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #87D700;">success</span>() {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt;().setCode(0).setMessage(<span style="color: #CDC673;">"SUCCESS"</span>);
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #87D700;">success</span>(<span style="color: #5FD7FF;">T</span> <span style="color: #FF8C00;">data</span>) {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt;().setCode(0).setMessage(<span style="color: #CDC673;">"SUCCESS"</span>).setData(data);
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #87D700;">failure</span>() {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt;().setCode(-1).setMessage(<span style="color: #CDC673;">"FAILURE"</span>);
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #87D700;">failure</span>(<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">code</span>, <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">msg</span>) {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt;().setCode(code).setMessage(msg);
    }

    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> &lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt; <span style="color: #87D700;">failure</span>(<span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">code</span>, <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">msg</span>, <span style="color: #5FD7FF;">T</span> <span style="color: #FF8C00;">data</span>) {
        <span style="color: #FF1493;">return</span> <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">Result</span>&lt;<span style="color: #5FD7FF;">T</span>&gt;().setCode(-1).setMessage(<span style="color: #CDC673;">"FAILURE"</span>).setData(data);
    }
}
</pre>
</div></dd>
<dt>ErrorCode</dt><dd><div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * Error Code</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">final</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">ErrorCode</span> {
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * Normal</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">NORMAL</span> = 200;
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * Request error</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">REQUEST_ERROR</span> = 400;
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * Server refuse request</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">SERVER_REFUSE_REQUEST</span> = 403;
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * Server internal error</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">SERVER_INTERNAL_ERROR</span> = 500;
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * Argument valid failure</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">final</span> <span style="color: #5FD7FF;">int</span> <span style="color: #FF8C00;">ARGUMENT_VALID_FAILURE</span> = 1001;

}
</pre>
</div></dd>
</dl></li>

<li><p>
常用参数校验
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">限制</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">@Null</td>
<td class="org-left">限制只能为null</td>
</tr>

<tr>
<td class="org-left">@NotNull</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@AssertFalse</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@AssertTrue</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@DecimalMax(value)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@DecimalMin(value)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@Digits(integer,fraction)</td>
<td class="org-left">限制必须为一个小数，且整数部分的位数不能超过integer，小数部分的位数不能超过fraction</td>
</tr>

<tr>
<td class="org-left">@Future</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@Max(value)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@Min(value)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@Pattern(value)</td>
<td class="org-left">必须符合指定的正则表达式</td>
</tr>

<tr>
<td class="org-left">@Size(max,min)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@NotEmpty</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@NotBlank</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">@Email</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table></li>

<li><p>
RequestBody校验
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * RequestBody &#21442;&#25968;&#26657;&#39564;</span>
<span style="color: #CDC673;"> * &#26657;&#39564;&#22833;&#36133;&#20250;&#25243;&#20986; MethodArgumentNotValidException &#24322;&#24120;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/user"</span>)
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserController</span> {

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * RequestBody &#21442;&#25968;&#26657;&#39564;</span>
<span style="color: #CDC673;">     * &#20351;&#29992; @Valid &#21644; @Validated &#37117;&#21487;&#20197;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/save/1"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">ReturnResult</span> <span style="color: #87D700;">saveUser</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span> <span style="color: #5FD7FF;">UserDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #FF1493;">return</span> ReturnResult.success();
    }

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/save/2"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">ReturnResult</span> <span style="color: #87D700;">save2User</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Valid</span> <span style="color: #5FD7FF;">UserDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #FF1493;">return</span> ReturnResult.success();
    }
}
</pre>
</div></li>

<li><p>
RequestParam / PathVariable 校验
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * RequestMapping / PathVariable &#21442;&#25968;&#26657;&#39564;</span>
<span style="color: #CDC673;"> * &#26657;&#39564;&#22833;&#36133;&#20250;&#25243;&#20986; ConstraintViolationException &#24322;&#24120;</span>
<span style="color: #CDC673;"> * </span>
<span style="color: #CDC673;"> * &#27492;&#26102;&#24517;&#39035;&#22312;Controller&#19978;&#26631;&#27880; @Validated &#27880;&#35299;&#65292;&#24182;&#22312;&#20837;&#21442;&#19978;&#22768;&#26126;&#32422;&#26463;&#27880;&#35299;</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/user"</span>)
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #AF87FF;">@Validated</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserController</span> {
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#36335;&#24452;&#21464;&#37327;</span>
<span style="color: #CDC673;">     * &#28155;&#21152;&#32422;&#26463;&#27880;&#35299; @Min</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@GetMapping</span>(<span style="color: #CDC673;">"{userId}"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">ReturnResult</span> <span style="color: #87D700;">detail</span>(<span style="color: #AF87FF;">@PathVariable</span>(<span style="color: #CDC673;">"userId"</span>) <span style="color: #AF87FF;">@Min</span>(10000000000000000L) <span style="color: #5FD7FF;">Long</span> <span style="color: #FF8C00;">userId</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
    }

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#26597;&#35810;&#21442;&#25968;</span>
<span style="color: #CDC673;">     * &#28155;&#21152;&#32422;&#26463;&#27880;&#35299; @Length @NotNull</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@GetMapping</span>(<span style="color: #CDC673;">"getByAccount"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">ReturnResult</span> <span style="color: #87D700;">getByAccount</span>(<span style="color: #AF87FF;">@Length</span>(min = 6, max = 20) <span style="color: #AF87FF;">@NotNull</span> <span style="color: #5FD7FF;">String</span>  <span style="color: #FF8C00;">account</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
    }
}

</pre>
</div></li>

<li><p>
全局异常处理
<br />
在实际项目开发中，通常会用统一异常处理来返回一个更友好的提示。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#32479;&#19968;&#24322;&#24120;&#22788;&#29702;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RestControllerAdvice</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">GlobalExceptionHandler</span> {
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#21442;&#25968;&#26657;&#39564;&#38169;&#35823;&#30340;&#24322;&#24120;&#22788;&#29702;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@ExceptionHandler</span>({MethodArgumentNotValidException.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@ResponseStatus</span>(<span style="color: #AF87FF;">HttpStatus</span>.<span style="color: #5FD7FF;">OK</span>)
    <span style="color: #AF87FF;">@ResponseBody</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">handleMethodArgumentNotValidException</span>(<span style="color: #5FD7FF;">MethodArgumentNotValidException</span> <span style="color: #FF8C00;">ex</span>) {
        <span style="color: #5FD7FF;">BindingResult</span> <span style="color: #FF8C00;">bindingResult</span> = ex.getBindingResult();
        <span style="color: #5FD7FF;">StringBuilder</span> <span style="color: #FF8C00;">sb</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">StringBuilder</span>(<span style="color: #CDC673;">"&#26657;&#39564;&#22833;&#36133;:"</span>);
        <span style="color: #FF1493;">for</span> (<span style="color: #5FD7FF;">FieldError</span> <span style="color: #FF8C00;">fieldError</span> : bindingResult.getFieldErrors()) {
            sb.append(fieldError.getField()).append(<span style="color: #CDC673;">"&#65306;"</span>).append(fieldError.getDefaultMessage()).append(<span style="color: #CDC673;">", "</span>);
        }
        <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">msg</span> = sb.toString();
        <span style="color: #FF1493;">return</span> ReturnResult.failure(<span style="color: #AF87FF;">ErrorCode</span>.ARGUMENT_VALID_FAILURE, msg);
    }

    <span style="color: #AF87FF;">@ExceptionHandler</span>({ConstraintViolationException.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@ResponseStatus</span>(<span style="color: #AF87FF;">HttpStatus</span>.<span style="color: #5FD7FF;">OK</span>)
    <span style="color: #AF87FF;">@ResponseBody</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">handleConstraintViolationException</span>(<span style="color: #5FD7FF;">ConstraintViolationException</span> <span style="color: #FF8C00;">ex</span>) {
        <span style="color: #FF1493;">return</span> ReturnResult.failure(<span style="color: #AF87FF;">ErrorCode</span>.ARGUMENT_VALID_FAILURE, ex.getMessage());
    }

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#26410;&#30693;&#24322;&#24120;&#22788;&#29702;</span>
<span style="color: #CDC673;">     * </span><span style="color: #AF87FF;">@param</span><span style="color: #CDC673;"> e Exception</span>
<span style="color: #CDC673;">     * </span><span style="color: #AF87FF;">@return</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@ExceptionHandler</span>(Exception.<span style="color: #FF1493;">class</span>)
    <span style="color: #AF87FF;">@ResponseBody</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">ResponseEntity</span> <span style="color: #87D700;">handlerException</span>(<span style="color: #5FD7FF;">Exception</span> <span style="color: #FF8C00;">e</span>){
        log.error(e.getMessage(),e);
        <span style="color: #5FD7FF;">StringBuffer</span> <span style="color: #FF8C00;">errorMsg</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">StringBuffer</span>();
        errorMsg.append(e.getMessage());
        <span style="color: #5FD7FF;">HttpHeaders</span> <span style="color: #FF8C00;">httpHeaders</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">HttpHeaders</span>();
        httpHeaders.setContentType(<span style="color: #AF87FF;">MediaType</span>.APPLICATION_JSON);
        <span style="color: #5FD7FF;">ResponseEntity</span>&lt;<span style="color: #5FD7FF;">ReturnData</span>&gt; <span style="color: #FF8C00;">returnDataResponseEntity</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ResponseEntity</span>&lt;&gt;(<span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ReturnData</span>(<span style="color: #AF87FF;">ReturnData</span>.FAIL_CODE, errorMsg.toString(), <span style="color: #AF87FF;">null</span>, <span style="color: #AF87FF;">null</span>), httpHeaders, <span style="color: #AF87FF;">HttpStatus</span>.OK);
        <span style="color: #FF1493;">return</span> returnDataResponseEntity;
    }
}
</pre>
</div></li>

<li><p>
分组校验
<br />
为了区分业务场景，对于不同场景下的数据验证规则可能不一样（例如新增时可以不用传递 ID，而修改时必须传递ID），可以使用分组校验。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#20998;&#32452;&#26657;&#39564;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@Data</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserGroupValidDTO</span> {

    <span style="color: #AF87FF;">@NotNull</span>(groups = Update.<span style="color: #FF1493;">class</span>)
    <span style="color: #AF87FF;">@Min</span>(value = 10000000000000000L, groups = Update.<span style="color: #FF1493;">class</span>)
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Long</span> <span style="color: #FF8C00;">userId</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 2, max = 10, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">userName</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 6, max = 20, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">account</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 6, max = 20, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">password</span>;

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#20445;&#23384;&#30340;&#26102;&#20505;&#26657;&#39564;&#20998;&#32452;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">interface</span> <span style="color: #5FD7FF;">Save</span> {
    }

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#26356;&#26032;&#30340;&#26102;&#20505;&#26657;&#39564;&#20998;&#32452;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">interface</span> <span style="color: #5FD7FF;">Update</span> {
    }
}
</pre>
</div>

<p>
<br />
Controller 实现：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#20998;&#32452;&#26657;&#39564;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/user_group_valid"</span>)
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserGroupValidController</span> {

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/save"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">saveUser</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span>(<span style="color: #AF87FF;">UserGroupValidDTO</span>.Save.<span style="color: #FF1493;">class</span>) <span style="color: #5FD7FF;">UserGroupValidDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
        <span style="color: #FF1493;">return</span> Result.success();
    }

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/update"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">updateUser</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span>(<span style="color: #AF87FF;">UserGroupValidDTO</span>.Update.<span style="color: #FF1493;">class</span>) <span style="color: #5FD7FF;">UserGroupValidDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
        <span style="color: #FF1493;">return</span> Result.success();
    }
}
</pre>
</div></li>

<li><p>
嵌套校验
<br />
上面的校验主要是针对基本类型进行了校验，如果DTO中包含了自定义的实体类，就需要用到嵌套校验。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#23884;&#22871;&#26657;&#39564;</span>
<span style="color: #CDC673;"> * DTO&#20013;&#30340;&#26576;&#20010;&#23383;&#27573;&#20063;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#20351;&#29992;&#23884;&#22871;&#26657;&#39564;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@Data</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserNestedValidDTO</span> {
    <span style="color: #AF87FF;">@Min</span>(value = 10000000000000000L, groups = Update.<span style="color: #FF1493;">class</span>)
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Long</span> <span style="color: #FF8C00;">userId</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 2, max = 10, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">userName</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 6, max = 20, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">account</span>;

    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #AF87FF;">@Length</span>(min = 6, max = 20, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">password</span>;

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#27492;&#26102;DTO&#31867;&#30340;&#23545;&#24212;&#23383;&#27573;&#24517;&#39035;&#26631;&#35760;@Valid&#27880;&#35299;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@Valid</span>
    <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
    <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Job</span> <span style="color: #FF8C00;">job</span>;

    <span style="color: #AF87FF;">@Data</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">static</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">Job</span> {

        <span style="color: #AF87FF;">@NotNull</span>(groups = {Update.<span style="color: #FF1493;">class</span>})
        <span style="color: #AF87FF;">@Min</span>(value = 1, groups = Update.<span style="color: #FF1493;">class</span>)
        <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">Long</span> <span style="color: #FF8C00;">jobId</span>;

        <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
        <span style="color: #AF87FF;">@Length</span>(min = 2, max = 10, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
        <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">jobName</span>;

        <span style="color: #AF87FF;">@NotNull</span>(groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
        <span style="color: #AF87FF;">@Length</span>(min = 2, max = 10, groups = {Save.<span style="color: #FF1493;">class</span>, Update.<span style="color: #FF1493;">class</span>})
        <span style="color: #FF1493;">private</span> <span style="color: #5FD7FF;">String</span> <span style="color: #FF8C00;">position</span>;
    }

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#20445;&#23384;&#30340;&#26102;&#20505;&#26657;&#39564;&#20998;&#32452;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">interface</span> <span style="color: #5FD7FF;">Save</span> {
    }

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#26356;&#26032;&#30340;&#26102;&#20505;&#26657;&#39564;&#20998;&#32452;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #FF1493;">public</span> <span style="color: #FF1493;">interface</span> <span style="color: #5FD7FF;">Update</span> {
    }
}
</pre>
</div>

<p>
<br />
Controller 实现：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#23884;&#22871;&#26657;&#39564;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/user_nested_valid"</span>)
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">UserNestedValidController</span> {

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/save"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">saveUser</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span>(<span style="color: #AF87FF;">UserNestedValidDTO</span>.Save.<span style="color: #FF1493;">class</span>) <span style="color: #5FD7FF;">UserNestedValidDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
        <span style="color: #FF1493;">return</span> Result.success();
    }

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/update"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">updateUser</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span>(<span style="color: #AF87FF;">UserNestedValidDTO</span>.Update.<span style="color: #FF1493;">class</span>) <span style="color: #5FD7FF;">UserNestedValidDTO</span> <span style="color: #FF8C00;">userDTO</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
        <span style="color: #FF1493;">return</span> Result.success();
    }
}
</pre>
</div></li>

<li><p>
集合校验
<br />
如果请求体直接传递了json数组给后台，并希望对数组中的每一项都进行参数校验。此时，如果我们直接使用java.util.Collection下的list或者set来接收数据，参数校验并不会生效（单个数组可以使用）！我们可以使用自定义list集合来接收参数：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#21253;&#35013; List&#31867;&#22411;&#65292;&#24182;&#22768;&#26126; @Valid &#27880;&#35299;</span>
<span style="color: #CDC673;"> * </span><span style="color: #AF87FF;">@param</span><span style="color: #CDC673;"> </span><span style="color: #AF87FF;">&lt;E&gt;</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@Data</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">ValidationList</span>&lt;<span style="color: #5FD7FF;">E</span>&gt; <span style="color: #FF1493;">implements</span> <span style="color: #5FD7FF;">List</span>&lt;<span style="color: #5FD7FF;">E</span>&gt; {

    <span style="color: #AF87FF;">@Delegate</span> <span style="color: #8B8878;">// </span><span style="color: #8B8878;">@Delegate&#26159;lombok&#27880;&#35299;</span>
    <span style="color: #AF87FF;">@Valid</span> <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#19968;&#23450;&#35201;&#21152;@Valid&#27880;&#35299;</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">List</span>&lt;<span style="color: #5FD7FF;">E</span>&gt; <span style="color: #FF8C00;">list</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">ArrayList</span>&lt;&gt;();

    <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#19968;&#23450;&#35201;&#35760;&#24471;&#37325;&#20889;toString&#26041;&#27861;</span>
    <span style="color: #AF87FF;">@Override</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">String</span> <span style="color: #87D700;">toString</span>() {
        <span style="color: #FF1493;">return</span> list.toString();
    }
}
</pre>
</div>

<p>
Controller
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#38598;&#21512;&#26657;&#39564;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/valid_list"</span>)
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">ValidListController</span> {

    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/saveList"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">saveList</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #AF87FF;">@Validated</span>(<span style="color: #AF87FF;">UserGroupValidDTO</span>.Save.<span style="color: #FF1493;">class</span>) <span style="color: #5FD7FF;">ValidationList</span>&lt;<span style="color: #5FD7FF;">UserGroupValidDTO</span>&gt; <span style="color: #FF8C00;">userList</span>) {
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>
        <span style="color: #FF1493;">return</span> Result.success();
    }
}
</pre>
</div></li>

<li><p>
编程式校验
<br />
上面都是通过注解来进行校验，也可以使用编程的方式进行校验：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * &#32534;&#31243;&#24335;&#26657;&#39564;&#21442;&#25968;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@RequestMapping</span>(<span style="color: #CDC673;">"/api/valid_with_code"</span>)
<span style="color: #AF87FF;">@RestController</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">ValidWithCodeController</span> {
    <span style="color: #AF87FF;">@Autowired</span>
    <span style="color: #FF1493;">private</span> <span style="color: #AF87FF;">javax</span>.<span style="color: #AF87FF;">validation</span>.<span style="color: #5FD7FF;">Validator</span> <span style="color: #FF8C00;">globalValidator</span>;

    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#32534;&#31243;&#24335;&#26657;&#39564;</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@PostMapping</span>(<span style="color: #CDC673;">"/saveWithCodingValidate"</span>)
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Result</span> <span style="color: #87D700;">saveWithCodingValidate</span>(<span style="color: #AF87FF;">@RequestBody</span> <span style="color: #5FD7FF;">UserGroupValidDTO</span> <span style="color: #FF8C00;">userGroupValidDTO</span>) {
        <span style="color: #5FD7FF;">Set</span>&lt;<span style="color: #5FD7FF;">ConstraintViolation</span>&lt;<span style="color: #5FD7FF;">UserGroupValidDTO</span>&gt;&gt; <span style="color: #FF8C00;">validate</span> = globalValidator.validate(userGroupValidDTO, <span style="color: #AF87FF;">UserGroupValidDTO</span>.Save.<span style="color: #FF1493;">class</span>);
        <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#22914;&#26524;&#26657;&#39564;&#36890;&#36807;&#65292;validate&#20026;&#31354;&#65307;&#21542;&#21017;&#65292;validate&#21253;&#21547;&#26410;&#26657;&#39564;&#36890;&#36807;&#39033;</span>
        <span style="color: #FF1493;">if</span> (validate.isEmpty()) {
            <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#36890;&#36807;&#65292;&#25165;&#20250;&#25191;&#34892;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;</span>

        } <span style="color: #FF1493;">else</span> {
            <span style="color: #FF1493;">for</span> (<span style="color: #5FD7FF;">ConstraintViolation</span>&lt;<span style="color: #5FD7FF;">UserGroupValidDTO</span>&gt; <span style="color: #FF8C00;">userGroupValidDTOConstraintViolation</span> : validate) {
                <span style="color: #8B8878;">// </span><span style="color: #8B8878;">&#26657;&#39564;&#22833;&#36133;&#65292;&#20570;&#20854;&#23427;&#36923;&#36753;</span>
                System.out.println(userGroupValidDTOConstraintViolation);
                <span style="color: #8B8878;">// </span><span style="color: #8B8878;">throw new RuntimeException();</span>
            }
        }
        <span style="color: #FF1493;">return</span> Result.success();
    }
}
</pre>
</div>

<p>
<b><b>配置快速失败</b></b>
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;"> * Web &#37197;&#32622;</span>
<span style="color: #CDC673;"> *</span>
<span style="color: #CDC673;"> * </span><span style="color: #AF87FF;">@author</span><span style="color: #CDC673;"> zrg</span>
<span style="color: #CDC673;"> * </span><span style="color: #AF87FF;">@date</span><span style="color: #CDC673;"> 2021/5/17 16:11</span>
<span style="color: #CDC673;"> */</span>
<span style="color: #AF87FF;">@Configuration</span>
<span style="color: #FF1493;">public</span> <span style="color: #FF1493;">class</span> <span style="color: #5FD7FF;">WebConfig</span> {
    <span style="color: #CDC673;">/**</span>
<span style="color: #CDC673;">     * &#26657;&#39564;&#21442;&#25968;&#26102;&#21482;&#35201;&#20986;&#29616;&#26657;&#39564;&#22833;&#36133;&#30340;&#24773;&#20917;&#65292;&#23601;&#31435;&#21363;&#25243;&#20986;&#23545;&#24212;&#30340;&#24322;&#24120;&#65292;&#32467;&#26463;&#26657;&#39564;&#65292;&#19981;&#20877;&#36827;&#34892;&#21518;&#32493;&#30340;&#26657;&#39564;</span>
<span style="color: #CDC673;">     *</span>
<span style="color: #CDC673;">     * </span><span style="color: #AF87FF;">@return</span>
<span style="color: #CDC673;">     */</span>
    <span style="color: #AF87FF;">@Bean</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">Validator</span> <span style="color: #87D700;">validator</span>() {
        <span style="color: #5FD7FF;">ValidatorFactory</span> <span style="color: #FF8C00;">validatorFactory</span> = Validation.byProvider(HibernateValidator.<span style="color: #FF1493;">class</span>)
                .configure()
                .failFast(<span style="color: #AF87FF;">true</span>)
                .buildValidatorFactory();
        <span style="color: #FF1493;">return</span> validatorFactory.getValidator();
    }

    <span style="color: #AF87FF;">@Bean</span>
    <span style="color: #FF1493;">public</span> <span style="color: #5FD7FF;">MethodValidationPostProcessor</span> <span style="color: #87D700;">methodValidationPostProcessor</span>() {
        <span style="color: #5FD7FF;">MethodValidationPostProcessor</span> <span style="color: #FF8C00;">methodValidationPostProcessor</span> = <span style="color: #FF1493;">new</span> <span style="color: #5FD7FF;">MethodValidationPostProcessor</span>();
        methodValidationPostProcessor.setValidator(validator());
        <span style="color: #FF1493;">return</span> methodValidationPostProcessor;
    }
}
</pre>
</div></li>

<li>参考资料
<ul class="org-ul">
<li><a href="https://www.cnblogs.com/codeclock/p/13632217.html">https://www.cnblogs.com/codeclock/p/13632217.html</a></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-org7c91714" class="outline-5">
<h5 id="org7c91714"><span class="section-number-5">5.1.1.2</span> 深入探索 Spring 参数校验（源码解析）</h5>
<div class="outline-text-5" id="text-5-1-1-2">
<p>
参考资料
</p>
<ul class="org-ul">
<li><a href="https://www.cnblogs.com/yourbatman/p/11272939.html">https://www.cnblogs.com/yourbatman/p/11272939.html</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org9789d8a" class="outline-3">
<h3 id="org9789d8a"><span class="section-number-3">5.2</span> ORM 框架</h3>
</div>
<div id="outline-container-orgbe82a1a" class="outline-3">
<h3 id="orgbe82a1a"><span class="section-number-3">5.3</span> Java + MySQL</h3>
</div>
<div id="outline-container-orgc435609" class="outline-3">
<h3 id="orgc435609"><span class="section-number-3">5.4</span> Java + Redis</h3>
</div>
<div id="outline-container-org2b81efe" class="outline-3">
<h3 id="org2b81efe"><span class="section-number-3">5.5</span> 认证授权（JWT，SSO）</h3>
</div>
<div id="outline-container-org5e6a44c" class="outline-3">
<h3 id="org5e6a44c"><span class="section-number-3">5.6</span> 分布式</h3>
<div class="outline-text-3" id="text-5-6">
</div>
<div id="outline-container-orgf077e9c" class="outline-4">
<h4 id="orgf077e9c"><span class="section-number-4">5.6.1</span> 相关概念</h4>
</div>
<div id="outline-container-orgdcdd5c0" class="outline-4">
<h4 id="orgdcdd5c0"><span class="section-number-4">5.6.2</span> Dubbo</h4>
</div>
<div id="outline-container-org97ceb24" class="outline-4">
<h4 id="org97ceb24"><span class="section-number-4">5.6.3</span> 消息队列</h4>
</div>
<div id="outline-container-org762f8a2" class="outline-4">
<h4 id="org762f8a2"><span class="section-number-4">5.6.4</span> 消息中间件：RabbitMQ</h4>
</div>
<div id="outline-container-org33854f5" class="outline-4">
<h4 id="org33854f5"><span class="section-number-4">5.6.5</span> 消息中间件：RocketMQ</h4>
</div>
<div id="outline-container-orga4bfe45" class="outline-4">
<h4 id="orga4bfe45"><span class="section-number-4">5.6.6</span> 消息系统：Kafaka</h4>
</div>
<div id="outline-container-org59db963" class="outline-4">
<h4 id="org59db963"><span class="section-number-4">5.6.7</span> API 网关</h4>
</div>
<div id="outline-container-orga263580" class="outline-4">
<h4 id="orga263580"><span class="section-number-4">5.6.8</span> 分布式ID</h4>
</div>
<div id="outline-container-org3f4f785" class="outline-4">
<h4 id="org3f4f785"><span class="section-number-4">5.6.9</span> 限流算法</h4>
</div>
<div id="outline-container-org7c19c5b" class="outline-4">
<h4 id="org7c19c5b"><span class="section-number-4">5.6.10</span> 分布式协调服务框架：Zookeeper</h4>
</div>
</div>
<div id="outline-container-orgc19f2f2" class="outline-3">
<h3 id="orgc19f2f2"><span class="section-number-3">5.7</span> 微服务</h3>
<div class="outline-text-3" id="text-5-7">
</div>
<div id="outline-container-orgc77e771" class="outline-4">
<h4 id="orgc77e771"><span class="section-number-4">5.7.1</span> Spring Cloud</h4>
</div>
</div>
</div>
