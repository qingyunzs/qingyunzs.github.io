---
layout: post
title: PHP 调用新浪API生成短链接 
author: zrg
description: 短链接生成
excerpt: 
comments: false
categories: 
- php
tags:
- PHP-新浪-短链接
---

<p>
感谢您阅读此文，如果您发现任何错误，请发邮件至 zrg1390556487@gmail.com，谢谢！
</p>

<div id="outline-container-orgae84cd1" class="outline-2">
<h2 id="orgae84cd1">API</h2>
<div class="outline-text-2" id="text-orgae84cd1">
<ul class="org-ul">
<li><a href="http://api.t.sina.com.cn/short_url/shorten.json">http://api.t.sina.com.cn/short_url/shorten.json</a> (返回结果是JSON格式)</li>
<li><a href="http://api.t.sina.com.cn/short_url/shorten.xml">http://api.t.sina.com.cn/short_url/shorten.xml</a> （返回结果是XML格式）</li>
</ul>
</div>
<div id="outline-container-org5c10b7c" class="outline-3">
<h3 id="org5c10b7c">请求参数</h3>
<div class="outline-text-3" id="text-org5c10b7c">
<ul class="org-ul">
<li>source 申请应用时分配的AppKey，调用接口时代表应用的唯一身份。</li>
<li>url_long 需要转换的长链接，需要URLencoded，最多不超过20个。</li>
</ul>
</div>
</div>
<div id="outline-container-org474d9fb" class="outline-3">
<h3 id="org474d9fb">创建source方法</h3>
<div class="outline-text-3" id="text-org474d9fb">
<ol class="org-ol">
<li>进入<a href="http://open.weibo.com/">http://open.weibo.com/</a> ，选择菜单 微连接-&gt;网站接入。</li>
<li>点击立即接入，创建新应用，随便填写应用名称，点击创建。</li>
<li>创建成功后，AppKey就是source参数的值，可以用于请求创建短链接。</li>
</ol>
</div>
</div>
<div id="outline-container-orgf862ba0" class="outline-3">
<h3 id="orgf862ba0">测试代码</h3>
<div class="outline-text-3" id="text-orgf862ba0">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>测试代码</label><pre class="src src-emacs-lisp">&lt;?php
$api = 'http://api.t.sina.com.cn/short_url/shorten.json'<span style="color: #b22222;">; </span><span style="color: #b22222;">// json</span>
// $api = 'http://api.t.sina.com.cn/short_url/shorten.xml'<span style="color: #b22222;">; </span><span style="color: #b22222;">// xml</span>

$source = '&#24744;&#30003;&#35831;&#30340;AppKey'<span style="color: #b22222;">;</span>
$url_long = 'http://blog.csdn.net/fdipzone'<span style="color: #b22222;">;</span>

$request_url = sprintf($api.'?source=%s&amp;url_long=%s', $source, $url_long)<span style="color: #b22222;">;</span>

$data = file_get_contents($request_url)<span style="color: #b22222;">;</span>
echo $data<span style="color: #b22222;">;</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org89adfa3" class="outline-2">
<h2 id="org89adfa3">References</h2>
<div class="outline-text-2" id="text-org89adfa3">
<ul class="org-ul">
<li><a href="https://blog.csdn.net/fdipzone/article/details/70832761">php 调用新浪API生成短链接</a></li>
</ul>
</div>
</div>
