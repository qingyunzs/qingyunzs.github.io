---
title: Next + Gihub 建站备忘录
author: zrg
comments: true
description: "NexT is a high quality elegant Jekyll theme ported from Hexo Next. It is crafted from scratch, with love."
date: 2018-08-05
categories:
- jekyll
tags:
- Jekyll
- NexT
- Site
---


<div id="outline-container-orgc3d2489" class="outline-2">
<h2 id="orgc3d2489"><span class="section-number-2">1</span> Example</h2>
<div class="outline-text-2" id="text-1">
<p>
NexT theme from <a href="https://github.com/iissnan/hexo-theme-next">Hexo Theme</a>, and this site build  with org-mode. The following are some references:
</p>
<ul class="org-ul">
<li><a href="https://jekyllrb.com/">https://jekyllrb.com/</a></li>
<li><a href="http://theme-next.simpleyyt.com/">Next Theme</a></li>
<li><a href="http://simpleyyt.github.io/jekyll-theme-next/">http://simpleyyt.github.io/jekyll-theme-next/</a></li>
<li><a href="http://simpleyyt.com/">Yitao' Blog</a></li>
<li><a href="http://theme-next.simpleyyt.com/">http://theme-next.simpleyyt.com/</a></li>
<li><a href="https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/">https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/</a></li>
<li><a href="https://zhaorengui.github.io">https://zhaorengui.github.io</a></li>
</ul>
</div>
</div>
<div id="outline-container-org240d571" class="outline-2">
<h2 id="org240d571"><span class="section-number-2">2</span> Installation</h2>
<div class="outline-text-2" id="text-2">
<ol class="org-ol">
<li><p>
Check whether you have `Ruby 2.1.0` or higher installed:
</p>
<pre class="example">
$ ruby --version
</pre></li>
<li><p>
安装 `Bundler` and `Jekyll`:
</p>
<pre class="example">
$ gem install bundler jekyll
</pre></li>
<li><p>
Clone
</p>
<pre class="example">
$ git clone https://github.com/zhaorengui/zhaorengui.github.io.git
</pre></li>
<li><p>
安装依赖包(dependencies packages)：
</p>
<pre class="example">
$ cd zhaorengui.github.io
$ bundle install
</pre></li>
<li><p>
运行访问：
</p>
<pre class="example">
$ bundle exec jekyll server
</pre>

<p>
Access <a href="http://localhost:4000">http://localhost:4000</a> on browser.
</p></li>
</ol>
</div>
</div>
<div id="outline-container-org388d9ca" class="outline-2">
<h2 id="org388d9ca"><span class="section-number-2">3</span> 写作规范</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8f280e7" class="outline-3">
<h3 id="org8f280e7"><span class="section-number-3">3.1</span> 目录结构说明</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">&#9500;&#9472;_data         &#25968;&#25454;&#30446;&#24405;
&#9474;  &#9500;&#9472;languages  &#35821;&#35328;&#30446;&#24405;
&#9500;&#9472;_drafts       (&#39044;&#21457;&#24067;)&#33609;&#31295;&#30446;&#24405;
&#9500;&#9472;_include      &#22266;&#23450;&#25991;&#20214;&#27169;&#26495;&#24341;&#29992;&#30446;&#24405;
&#9500;&#9472;_orgs         org&#25991;&#20214;&#30446;&#24405;
&#9474;  &#9500;&#9472;_assets    &#36164;&#28304;&#30446;&#24405;&#65292;img,js,css,...
&#9474;  &#9500;&#9472;_drafts    org&#33609;&#31295;&#30446;&#24405;
&#9474;  &#9500;&#9472;_posts     org&#21457;&#24067;&#30446;&#24405;
&#9500;&#9472;_posts        &#25991;&#31456;&#30446;&#24405;&#65292;&#30342;&#26159;html&#25991;&#20214;
&#9500;&#9472;_sass         scss&#25991;&#20214;&#30446;&#24405;
&#9500;&#9472;_site         &#31449;&#28857;&#35775;&#38382;&#30446;&#24405;
&#9500;&#9472;about         &#20851;&#20110;&#30446;&#24405;
&#9500;&#9472;archives      &#24402;&#26723;&#30446;&#24405;
&#9500;&#9472;assets        &#36164;&#28304;&#30446;&#24405;
&#9500;&#9472;categories    &#20998;&#31867;&#30446;&#24405;
&#9500;&#9472;tag           &#26631;&#31614;&#30446;&#24405;
&#9500;&#9472;tags          &#26631;&#31614;&#30446;&#24405;
&#9500;&#9472;404.html      404&#39029;&#38754;
&#9500;&#9472;Gemfile       jekyll&#25991;&#20214;
&#9500;&#9472;Gemfile.lock  jekyll&#25991;&#20214;
&#9500;&#9472;README.en.md  &#33521;&#25991;&#35828;&#26126;&#25991;&#20214;
&#9500;&#9472;README.md     &#35828;&#26126;&#25991;&#20214;
&#9500;&#9472;_config.yml   &#37197;&#32622;&#25991;&#20214;
&#9500;&#9472;index.html    &#20837;&#21475;&#25991;&#20214;
&#9492;&#9472;search.xml    &#25628;&#32034;&#37197;&#32622;&#25991;&#20214;
</pre>
</div>

<p>
<b><b>重要目录或文件说明</b></b>
</p>
<ul class="org-ul">
<li>_config.yml，保存配置数据。</li>
<li>_drafts，（草稿）是未发布的文章。</li>
<li>_includes，包含部分到你的布局或者文章中以方便重用。</li>
<li>_layouts，layouts（布局）是包裹在文章外部的模板。布局可以在 YAML 头信息中根据不同文章进行选择。</li>
<li>_posts，这里放的就是你的文章了。文件格式很重要，必须要符合: YEAR-MONTH-DAY-title.MARKUP。</li>
<li>_data，格式化好的网站数据应放在这里。jekyll 的引擎会自动加载在该目录下所有的 yaml 文件（后缀是 .yml, .yaml, .json 或者 .csv ）。这些文件可以经由 ｀site.data｀ 访问。如果有一个 members.yml 文件在该目录下，你就可以通过 site.data.members 获取该文件的内容。</li>
<li>_site  | 一旦 Jekyll 完成转换，就会将生成的页面放在这里（默认）。最好将这个目录放进你的 .gitignore 文件中。</li>
<li>index.html and other HTML, Markdown, Textile files  | 如果这些文件中包含 YAML 头信息 部分，Jekyll 就会自动将它们进行转换。当然，其他的如 .html, .markdown, .md, 或者 .textile 等在你的站点根目录下或者不是以上提到的目录中的文件也会被转换。</li>
<li>Other Files/Folders，其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。</li>
</ul>
</div>
</div>
<div id="outline-container-org0c2d9c8" class="outline-3">
<h3 id="org0c2d9c8"><span class="section-number-3">3.2</span> 命名规则</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>分类命名：英文名称全部小写，如algorithms，c#，javascript等。两个单词以上组成，采用-字符连接。分类名称不能重名。</li>
<li>标签命名：与实际常见命名一致，如MySQL，PHP，Jekyll等。另外一些两个单词以上组成的术语，建议采用-字符连接，如Design-Pattern。</li>
<li>org 源文件命名：日期+文件描述名称，文件描述名称采用-字符连接，如2018-12-12-vue-iview.org。</li>
<li>org 发布目录命名：采用驼峰法命名。</li>
</ol>
</div>
</div>
<div id="outline-container-orgdef5995" class="outline-3">
<h3 id="orgdef5995"><span class="section-number-3">3.3</span> 内容规范</h3>
<div class="outline-text-3" id="text-3-3">
<ol class="org-ol">
<li>目录编号：文章内容最多支持 6 级目录，对于 6 级以上内容使用有序列表或无序列表表示。</li>
<li>标点符号：严格遵守中英文标点符号命名规则及行文规范。</li>
<li>中英文混用情况：
<ul class="org-ul">
<li>英文符号就近使用原则，也就是说包含英文则使用英文符号。</li>
<li>中英文混用时，英文单词两端使用空格隔开。</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orge735f8a" class="outline-3">
<h3 id="orge735f8a"><span class="section-number-3">3.4</span> 构建写作环境</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-org21c7c3c" class="outline-4">
<h4 id="org21c7c3c"><span class="section-number-4">3.4.1</span> 使用 org-mode 写作</h4>
<div class="outline-text-4" id="text-3-4-1">
<ol class="org-ol">
<li>下载文件：<a href="https://github.com/zhaorengui/.emacs.d.git">https://github.com/zhaorengui/.emacs.d.git</a></li>
<li>【修改】自定义 ~/.emacs.d/lisp/init-org-jekyll.el 参数</li>
<li>配置 emacs 加载 init-org-jekyll</li>
<li>【验证】打开 emacs，M-x jekyll-draft-post RET，检查是否正常提示输入文章标题，正常说明配置加载成功。</li>
</ol>
</div>
</div>
<div id="outline-container-org6d50466" class="outline-4">
<h4 id="org6d50466"><span class="section-number-4">3.4.2</span> 使用 markdown 写作</h4>
<div class="outline-text-4" id="text-3-4-2">
<ol class="org-ol">
<li>（推荐）在 _orgs/_posts 目录下，以markdown格式写文章，每次发布时使用 org 发布方式（在下一小节中有讲解），即 org-publish。</li>
<li>直接在_posts目录下写markdown文件</li>
</ol>
</div>
</div>
<div id="outline-container-org3b6cd7a" class="outline-4">
<h4 id="org3b6cd7a"><span class="section-number-4">3.4.3</span> 开始写作</h4>
<div class="outline-text-4" id="text-3-4-3">
<ol class="org-ol">
<li>打开 emacs，M-x jekyll-draft-post，按提示输入标题，Emacs 便会在 _org/_drafts 中新建该文件，在 _org/_drafts 中编辑的文件不会被发布；</li>
<li>当文章写好后，M-x jekyll-publish-post，Emacs 便会将文章转移至 _org/_posts 中；</li>
<li>M-x org-publish，选择 jekyll-zhaorengui-github-io（取决于你配置中改的名字），Emacs 会将 _org/_posts 中的所有 org 文件转换成 html 文件并存于 _posts 中，并把 _org/_assest 中图片等静态资源全部复制至站点根目录下的 _assest 目录中。</li>
</ol>
</div>
</div>
<div id="outline-container-orgb0ce45b" class="outline-4">
<h4 id="orgb0ce45b"><span class="section-number-4">3.4.4</span> 注意事项</h4>
<div class="outline-text-4" id="text-3-4-4">
<ol class="org-ol">
<li>只有文章有更新，才会更新 _posts 目录下的内容，所以批量迁移时，注意保留 _posts 目录下的内容。</li>
<li>如何彻底删除某篇文章呢？就是在删除 _orgs/_posts 目录下的文件后，接着删除 _posts 目录下的文件。</li>
</ol>
</div>
</div>
</div>
</div>
<div id="outline-container-orgad42926" class="outline-2">
<h2 id="orgad42926"><span class="section-number-2">4</span> 常见问题</h2>
<div class="outline-text-2" id="text-4">
<ol class="org-ol">
<li><p>
undefined method `new' for BigDecimal:Class (NoMethodError)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">version  characteristics                                            Supported ruby version range
2.0.0    You cannot use BigDecimal.new and do subclassing           2.4 ..
1.4.x    BigDecimal.new and subclassing always prints warning.      2.3 .. 2.6
1.3.5    You can use BigDecimal.new and subclassing without warning .. 2.5

$ vim Gemfile
gem 'bigdecimal', '1.3.5'
</pre>
</div></li>
<li><p>
warning: Using the last argument as keyword parameters is deprecated
</p>
<pre class="example">
$ bundle update
</pre></li>
</ol>
</div>
</div>
<div id="outline-container-orgec6f244" class="outline-2">
<h2 id="orgec6f244"><span class="section-number-2">5</span> 浏览器支持</h2>
<div class="outline-text-2" id="text-5">

<div id="org9470968" class="figure">
<p><img src="http://iissnan.com/nexus/next/browser-support.png" alt="browser-support.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org99dbe24" class="outline-2">
<h2 id="org99dbe24"><span class="section-number-2">6</span> 提问的智慧</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="http://www.catb.org/~esr/faqs/smart-questions.html">http://www.catb.org/~esr/faqs/smart-questions.html</a>
</p>
</div>
</div>
